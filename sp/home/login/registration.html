<!DOCTYPE html>
<html lang="en">
  <head>
    <!-- Required meta tags -->
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
    <title>Byte Busters CTF - Registration</title>

    <link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.6.3/css/all.css" integrity="sha384-UHRtZLI+pbxtHCWp1t77Bi1L4ZtiqrqD80Kn4Z8NTSRyMA2Fd33n5dQ8lWUE00s/" crossorigin="anonymous">
    
    <link rel="stylesheet" href="../assets/css/bootstrap4-neon-glow.min.css">
    <link rel="stylesheet" href="../assets/css/main.css">
    <link rel="stylesheet" href="../assets/css/particles.css">
    
    
    <link href="https://fonts.googleapis.com/css?family=Roboto" rel="stylesheet">
    <link rel='stylesheet' href='https://cdn.jsdelivr.net/font-hack/2.020/css/hack.min.css'>
    
  </head>
  <body>

      <div id="particles-js"></div>

  <div class="navbar-dark text-white">
    <div class="container">
      <nav class="navbar px-0 navbar-expand-lg navbar-dark">
        <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarNavAltMarkup" aria-controls="navbarNavAltMarkup" aria-expanded="false" aria-label="Toggle navigation">
          <span class="navbar-toggler-icon"></span>
        </button>
        <div class="collapse navbar-collapse" id="navbarNavAltMarkup">
          <div class="navbar-nav">
            <a href="../index.html" class="pl-md-0 p-3 text-light">Home</a>
            <a href="login.html" class="p-3 text-decoration-none text-light">Login</a>
          </div>
        </div>
      </nav>

    </div>
  </div>


  
<div class="container py-5 mb-5">

  <h1 class="mb-5" style="text-align: center">Register your team for the CTF<span class="vim-caret">͏͏&nbsp;&nbsp;</span></h1>
  <div class="row py-4">
    <div class="col-md-8 order-md-2">
      <form class="needs-validation" id="forms" action="register.php"  method="post"   >
        <div class="row">
          <div class="col-md-6 mb-3">
            <label for="firstName">Member-1</label>
            <input type="text" class="form-control" id="member1" placeholder="Enter the name" value="" name="member1" required>
            <div class="invalid-feedback" style="width: 100%;">
              Valid first name is required.
            </div>
          </div>
          <div class="col-md-6 mb-3">
            <label for="lastName">Member-2</label>
            <input type="text" class="form-control" id="member2" placeholder="Enter the name" value="" name="member2" >
            <div class="invalid-feedback" style="width: 100%;">
              Valid last name is required.
            </div>
          </div>
          <div class="col-md-6 mb-3">
            <label for="lastName">Member-3</label>
            <input type="text" class="form-control" id="member3" placeholder="Enter the name" value="" name="member3" >
            <div class="invalid-feedback" style="width: 100%;">
              Valid last name is required.
            </div>
          </div>
        </div>

        <div class="mb-3">
          <label for="username">Team_Name</label>
          <div class="input-group">
            <div class="input-group-prepend">
              <span class="input-group-text">@</span>
            </div>
            <input type="text" class="form-control" id="team_name" placeholder=" Enter Team_Name"  name = "team_name" required>
            <div class="invalid-feedback" style="width: 100%;">
              Your username is required.
            </div>
          </div>
        </div>
        <div class="mb-3">
          <label for="username">Team_ID</label>
          <div class="input-group">
            <div class="input-group-prepend">
              <span class="input-group-text">@</span>
            </div>
            <input type="text" class="form-control" id="team_id" name = "team_id" placeholder=" Enter only 5  Digit Numbers " min="1" max="5" required>
            <div class="invalid-feedback" style="width: 100%;">
              Your username is required.
            </div>
          </div>
        </div>

        
       

        <div class="row">
          <div class="col-md-5 mb-3">
            <label for="country">Department</label>
            <select class="custom-select d-block w-100" id="college" name="Department" required>
              <option value="default" disabled selected>Choose...</option>
              <option value="CSE">CSE</option>
              <option value="ADS">ADS</option>
              <option value="AI/M">AI/ML</option>
              <option value="IT">IT</option>
              <option value="MECH">MECH</option>
              <option value="ECE">ECE</option>
              <option value="EEE">EEE</option>
          </select>
         

          
            <div class="invalid-feedback" style="width: 100%;">
              Please select a valid Department

            </div>
          </div>
          


          <div class="col-md-4 mb-3">
            <label for="state">Year</label>
            <select class="custom-select d-block w-100" id="year" name = "Year" required>
              <option value="default" disabled selected>Choose...</option>
              <option value="1">First Year</option>
              <option value="2">Second Year</option>
              <option value="3">Third Year</option>
              <option value="4">Final Year</option>
            </select>
            <div class="invalid-feedback" style="width: 100%;">
              Please select a valid year
            </div>
          </div>
          <div class="col-md-3 mb-3">
            <label for="dept">Phone</label>
            <input type="number" class="form-control" id="phone" placeholder="Enter Number"  name = "phone"required>
            <div class="invalid-feedback" style="width: 100%;">
              Numebr is required
            </div>
          </div>
        </div>
        <hr class="mb-4">
        <div class="custom-control custom-checkbox">
          <input type="checkbox" class="custom-control-input" id="solemnly-swear">
         
          <label class="custom-control-label" for="solemnly-swear">Never accept a Defeat unless Trying it.</label>
        </div>
        <hr class="mb-4">
        <!-- <a href="#!" class="btn btn-outline-primary btn-shadow">Outline Button</a> -->

        <button class="btn btn-outline-success btn-shadow btn-lg btn-block" type="submit"> Start Hacking... </button>
      </form>
    </div>
    <div class="col-md-2 order-md-1"></div>
    <div class="col-md-2 order-md-3"></div>
  </div>
</div>
<!-- Add this script section at the end of your HTML body -->
<script>
  function validateForm() {
    // Fetching values from the form
    var member1Input = document.getElementById('member1');
    var member1Value = member1Input.value;

    // Check if Member-1 contains only characters
    if (!/^[A-Za-z]+$/.test(member1Value)) {
      // If not, show an alert and prevent form submission
      alert('Please enter a valid member1 name with only characters.');
      return false;
    }
    
    
    var teamNameInput = document.getElementById('team_name');
     var teamNameValue = teamNameInput.value;

// Check if Team Name contains only characters, numbers, spaces, and common special characters
if (!/^[A-Za-z0-9\s!@#$%^&*()_+{}\[\]:;<>,.?~\\/-]+$/.test(teamNameValue)) {
  // If not, show an alert and prevent form submission
  alert('Please enter a valid Team Name with alphabets, numbers, spaces, and common special characters.');
  return false;
}

    var teamIdInput = document.getElementById('team_id');
    var teamIdValue = teamIdInput.value;
    console.log(typeof(teamIdInput));

    // Check if the Team ID is a 5-digit number
    if (!/^\d{5}$/.test(teamIdValue)) {
      // If not, show an alert and prevent form submission
      alert('Please enter a valid 5-digit number for Team ID.');
      return false;
    }


    // If the input is valid, allow form submission
   
    var departmentSelect = document.getElementById('college');
    var departmentValue = departmentSelect.value;

    // Check if the selected department is the default value
    if (departmentValue === 'default') {
      // If it is, show an alert and prevent form submission
      alert('Please select a valid Department YOU CANT leave that  EMPTY');
      return false;
    }

    // If the department is valid, allow form submission
    
    var departmentSelect = document.getElementById('year');
    var yearValue = departmentSelect.value;

    // Check if the selected department is the default value
    if (yearValue === 'default') {
      // If it is, show an alert and prevent form submission
      alert('Please select YOUR YEAR you cannot leave it EMPTY');
      return false;
    }
    var phoneNumberInput = document.getElementById('phone');
    var phoneNumberValue = phoneNumberInput.value;

    // Check if the phone number is exactly 10 digits and contains only numeric characters
    if (!/^\d{10}$/.test(phoneNumberValue)) {
      // If not, show an alert and prevent form submission
      alert('Please enter a valid 10-digit phone number.');
      return false;
    }
    
    var teamIdInput = document.getElementById('team_id');
    var teamIdValue = teamIdInput.value;
    // Perform an AJAX request to check if the team ID is in use
    
    var url = 'check_team_id.php?teamId=' + teamIdValue;
    const xhttp = new XMLHttpRequest();
    xhttp.open("GET", url);
    xhttp.send();

    xhttp.onload = function() {
      console.log(this.responseText);
    if (this.responseText== "use"){
      alert("TEAM_ID ALREADY EXIST");
      event.preventDefault();
     }else{
      document.getElementById('forms').submit();
      
    }
  }
 
  return false;


    // If the department is valid, allow form submission
   
  }
  

  // Attach the validateForm function to the form's onsubmit event
  document.getElementById('forms').onsubmit = validateForm;
</script>

<!-- Add this script section at the end of your HTML body -->





    <!-- Optional JavaScript -->
    <!-- jQuery first, then Popper.js, then Bootstrap JS -->

    <script src="https://code.jquery.com/jquery-3.3.1.slim.min.js" integrity="sha384-q8i/X+965DzO0rT7abK41JStQIAqVgRVzpbzo5smXKp4YfRvH+8abtTE1Pi6jizo" crossorigin="anonymous"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.6/umd/popper.min.js" integrity="sha384-wHAiFfRlMFy6i5SRaxvfOCifBUQy1xHdJ/yoi7FRNXMRBu5WHdZYu1hA6ZOblgut" crossorigin="anonymous"></script>
    <script src="https://stackpath.bootstrapcdn.com/bootstrap/4.2.1/js/bootstrap.min.js" integrity="sha384-B0UglyR+jN6CkvvICOB2joaf5I4l3gm9GU6Hc1og6Ls7i6U/mkkaduKaBhlAXv9k" crossorigin="anonymous"></script>
        
    <script src="../assets/js/particles.js"></script>
    <script src="../assets/js/app.js"></script>

  </body>
</html>
